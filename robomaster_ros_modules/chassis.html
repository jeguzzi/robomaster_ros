<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chassis &mdash; Robomaster ROS 0.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Gimbal" href="gimbal.html" />
    <link rel="prev" title="Camera" href="camera.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Robomaster ROS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robomaster_description.html">robomaster_description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robomaster_msgs.html">robomaster_msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robomaster_ros.html">robomaster_ros</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../robomaster_driver_node.html">Robomaster Driver Node</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../robomaster_driver_node.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="arm.html">Arm</a></li>
<li class="toctree-l3"><a class="reference internal" href="armor.html">Armor</a></li>
<li class="toctree-l3"><a class="reference internal" href="battery.html">Battery</a></li>
<li class="toctree-l3"><a class="reference internal" href="blaster.html">Blaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera.html">Camera</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Chassis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sensing-and-state-estimation">Sensing and State Estimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#control">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subscription">Subscription</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publishers">Publishers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-servers">Service Servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#action-servers">Action Servers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gimbal.html">Gimbal</a></li>
<li class="toctree-l3"><a class="reference internal" href="gripper.html">Gripper</a></li>
<li class="toctree-l3"><a class="reference internal" href="leds.html">LEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="pwm.html">PWM</a></li>
<li class="toctree-l3"><a class="reference internal" href="sbus.html">SBus</a></li>
<li class="toctree-l3"><a class="reference internal" href="sensor_adapter.html">Sensor adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="servo.html">Servo</a></li>
<li class="toctree-l3"><a class="reference internal" href="speaker.html">Speaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="tof.html">Time-of-Flight distance sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="uart.html">UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="vision.html">Vision</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../robomaster_driver_node.html#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../robomaster_driver_node.html#publishers">Publishers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Robomaster ROS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../robomaster_driver_node.html">Robomaster Driver Node</a></li>
      <li class="breadcrumb-item active">Chassis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/robomaster_ros_modules/chassis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="chassis">
<h1>Chassis<a class="headerlink" href="#chassis" title="Permalink to this heading"></a></h1>
<p>The ROS driver wraps the module <code class="xref py py-mod docutils literal notranslate"><span class="pre">robomaster.chassis</span></code> related to the wheels and the chassis state.
The module is enabled by <a class="reference internal" href="#RoboMasterROS.param.chassis.enabled" title="RoboMasterROS.param.chassis.enabled"><em class="xref ros ros-param">chassis.enabled</em></a>.</p>
<p>The Robomaster has 4 independently controllable <a class="reference external" href="https://en.wikipedia.org/wiki/Mecanum_wheel">mecanum wheels</a>,
with encoders, and an IMU sensor (accelerometer and magnetometer).</p>
<section id="sensing-and-state-estimation">
<span id="chassis-state"></span><h2>Sensing and State Estimation<a class="headerlink" href="#sensing-and-state-estimation" title="Permalink to this heading"></a></h2>
<p>It gather the onboard state estimation from several SDK subscribers
at a rate controlled by parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.rate" title="RoboMasterROS.param.chassis.rate"><em class="xref ros ros-param">chassis.rate</em></a>:
- orientation from <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.sub_attitude" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.sub_attitude()</span></code></a>
- wheels’ angular position and velocity from <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.sub_esc" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.sub_esc()</span></code></a>
- angular velocity and linear acceleration from <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.sub_imu" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.sub_imu()</span></code></a>
- horizontal pose from <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.sub_position" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.sub_position()</span></code></a>
- horizontal velocity from <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.sub_velocity" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.sub_velocity()</span></code></a></p>
<p>merges it and republishes to ROS as</p>
<ul class="simple">
<li><p>fused odometry estimation in <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a></p></li>
<li><p>fused orientation (only if <a class="reference internal" href="#RoboMasterROS.param.chassis.imu_includes_orientation" title="RoboMasterROS.param.chassis.imu_includes_orientation"><em class="xref ros ros-param">chassis.imu_includes_orientation</em></a> is enabled)
and imu sensor readings in <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a></p></li>
<li><p>wheels’ joint state in <a class="reference internal" href="../robomaster_driver_node.html#RoboMasterROS.pub.joint_states_p" title="RoboMasterROS.pub.joint_states_p"><em class="xref ros ros-pub">joint_states_p</em></a></p></li>
<li><p>a tf transform from <code class="docutils literal notranslate"><span class="pre">odom</span></code> to <code class="docutils literal notranslate"><span class="pre">base_link</span></code> from the pose component of the odometry</p></li>
</ul>
<p>Use parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.force_level" title="RoboMasterROS.param.chassis.force_level"><em class="xref ros ros-param">chassis.force_level</em></a> to force the published state estimation
to be perfectly horizontally, effectively projecting the orientation to be parallel to the ground.
In any case, the robot is not tracking the vertical position, which is always set to zero.
Enable parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.odom_twist_in_odom" title="RoboMasterROS.param.chassis.odom_twist_in_odom"><em class="xref ros ros-param">chassis.odom_twist_in_odom</em></a> to switch to the odom frame for the twist.</p>
<p>The driver also publishes the chassis state on topic <a class="reference internal" href="#RoboMasterROS.pub.state" title="RoboMasterROS.pub.state"><em class="xref ros ros-pub">state</em></a> gathered from <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.sub_status" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.sub_status()</span></code></a>
at a rate defined by parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.status.rate" title="RoboMasterROS.param.chassis.status.rate"><em class="xref ros ros-param">chassis.status.rate</em></a>.
The state contains macroscopic information about the robot: if it is moving, if it is leveled, … .</p>
</section>
<section id="control">
<h2>Control<a class="headerlink" href="#control" title="Permalink to this heading"></a></h2>
<p>Controlling mecanum wheels, it is possible to move the robot horizontally in any direction,
independently of the angular speed. The wheel motors can be engaged or disengaged using service <a class="reference internal" href="#RoboMasterROS.srv_server.engage_wheels" title="RoboMasterROS.srv_server.engage_wheels"><em class="xref ros ros-srv_server">engage_wheels</em></a>.
At launch, wheels are engaged but don’t resist movements. After the robot applies the first control command (see below),
the wheel will resist movements even when stopped. To let them free, you need to disengage them,
which will also preempt any current control.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you use  <a class="reference internal" href="#RoboMasterROS.srv_server.engage_wheels" title="RoboMasterROS.srv_server.engage_wheels"><em class="xref ros ros-srv_server">engage_wheels</em></a> as an emergency stop,
be aware that the robot will slide if it was moving or when on a slope.</p>
</div>
<p>To move the robot:</p>
<blockquote>
<div><ul class="simple">
<li><p>send target linear wheel speeds to <a class="reference internal" href="#RoboMasterROS.sub.cmd_wheels" title="RoboMasterROS.sub.cmd_wheels"><em class="xref ros ros-sub">cmd_wheels</em></a> to control individual wheels.
Wheel speeds are forwarded through <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.drive_wheels" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.drive_wheels()</span></code></a> and limited to 3.5 m/s.</p></li>
<li><p>send a target twist to <a class="reference internal" href="#RoboMasterROS.sub.cmd_vel" title="RoboMasterROS.sub.cmd_vel"><em class="xref ros ros-sub">cmd_vel</em></a> to control the robot omni-directionally on the floor.
When parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.twist_to_wheel_speeds" title="RoboMasterROS.param.chassis.twist_to_wheel_speeds"><em class="xref ros ros-param">chassis.twist_to_wheel_speeds</em></a> is enabled,
the ROS driver computes the appropriate target wheel speeds and forwards them to the robot:
When the parameter is not enabled, the target twist is directly forwarded
through <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.drive_speed" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.drive_speed()</span></code></a> (i.e., the twist control is done onboard).</p></li>
<li><p>send a goal pose (relative to the current robot pose) to <a class="reference internal" href="#RoboMasterROS.act_server.move" title="RoboMasterROS.act_server.move"><em class="xref ros ros-act_server">move</em></a>. The robot will then move towards the goal,
providing feedback on the progress. Use this action if you want to control the robot in space when the goal is fixed.</p></li>
</ul>
</div></blockquote>
<p>The SDK velocity commands have an optional deadman check controlled by parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.timeout" title="RoboMasterROS.param.chassis.timeout"><em class="xref ros ros-param">chassis.timeout</em></a>.
When enabled, it makes the robot stops if too much time passes from the last command.   If the value is larger than 0, it is passed as timeout time when calling SDK commands</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Controlling the velocity through target wheel speeds or chassis twist impacts the robot’s behavior.</p>
<dl class="simple">
<dt>target wheel speed</dt><dd><p>The robot ignores the chassis state estimation and just tries to set the target speed.
Once stopped, if you manually (i.e., pushing it or lifting it) rotate the chassis, the robot won’t react more
than resist wheel movements. The robot’s speed is maximal in this mode and you risk damaging it from collisions.</p>
</dd>
<dt>target twist or pose</dt><dd><p>The robot uses the chassis state estimation and tries to match the target estimation with the current estimation.
Once stopped, if you manually (i.e., pushing it or lifting it) rotate the chassis,
the robot will counter react to keep the same pose.
Moreover, for Robomaster EP, the allowed target speeds are lower at 0.8 m/s,
probably to protect the arm servos.</p>
</dd>
</dl>
</div>
<p>There are three ways to stop the robot. Once stopped the robot behaves differently.</p>
<blockquote>
<div><ul class="simple">
<li><p>Sending an zero twist to <a class="reference internal" href="#RoboMasterROS.sub.cmd_vel" title="RoboMasterROS.sub.cmd_vel"><em class="xref ros ros-sub">cmd_vel</em></a>: once stopped, the robot resists movements (see above). Would preempt an active <a class="reference internal" href="#RoboMasterROS.act_server.move" title="RoboMasterROS.act_server.move"><em class="xref ros ros-act_server">move</em></a> goal.</p></li>
<li><p>Sending an array with zero speeds to <a class="reference internal" href="#RoboMasterROS.sub.cmd_wheels" title="RoboMasterROS.sub.cmd_wheels"><em class="xref ros ros-sub">cmd_wheels</em></a>: once stopped,
individual wheels resist movements (see above). Would preempt an active <a class="reference internal" href="#RoboMasterROS.act_server.move" title="RoboMasterROS.act_server.move"><em class="xref ros ros-act_server">move</em></a> goal.</p></li>
<li><p>Sending a zero goal to <a class="reference internal" href="#RoboMasterROS.act_server.move" title="RoboMasterROS.act_server.move"><em class="xref ros ros-act_server">move</em></a>: once stopped,
the robot does not resist movements. Only effective if no goal are active.</p></li>
<li><p>Preempting a <a class="reference internal" href="#RoboMasterROS.act_server.move" title="RoboMasterROS.act_server.move"><em class="xref ros ros-act_server">move</em></a> goal: once stopped,
the robot does not resist movements. Only effective if a goal is active.</p></li>
</ul>
</div></blockquote>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.enabled">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.enabled</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">false</span></code><span class="pre">]</span><a class="headerlink" href="#RoboMasterROS.param.chassis.enabled" title="Permalink to this definition"></a></dt>
<dd><p>Enables all the ROS interface described here, which by default is disabled, like all other modules.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.timeout">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.timeout</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">0.0</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.timeout" title="Permalink to this definition"></a></dt>
<dd><p>Set the command deadline in seconds. Values less or equal to zero disable the deadman check.
Positive values are passed as <code class="docutils literal notranslate"><span class="pre">timeout</span></code> to the SDK methods <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.drive_wheels" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.drive_wheels()</span></code></a>
and <a class="reference external" href="https://robomaster-dev.readthedocs.io/zh_CN/latest/python_sdk/robomaster.html#robomaster.chassis.Chassis.drive_speed" title="(in RoboMaster Developer Guide v0.1.19)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">robomaster.chassis.Chassis.drive_speed()</span></code></a>.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.twist_to_wheel_speeds">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.twist_to_wheel_speeds</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">false</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.twist_to_wheel_speeds" title="Permalink to this definition"></a></dt>
<dd><p>When enabled, topic <a class="reference internal" href="#RoboMasterROS.sub.cmd_vel" title="RoboMasterROS.sub.cmd_vel"><em class="xref ros ros-sub">cmd_vel</em></a> will control wheel state instead of chassis state.
Useful to unlock full speed or to avoid that the robot tries to maintain orientation when lifted or pushed.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.force_level">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.force_level</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">false</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.force_level" title="Permalink to this definition"></a></dt>
<dd><p>When enabled, it force the published state estimation in <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a> (and tf)
to be horizontal.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.odom_twist_in_odom">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.odom_twist_in_odom</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">false</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.odom_twist_in_odom" title="Permalink to this definition"></a></dt>
<dd><p>When enabled, it switches the twist component of the published state estimation in <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a>
to the robot’s <code class="docutils literal notranslate"><span class="pre">odom</span></code> frame. The default is instead to use <code class="docutils literal notranslate"><span class="pre">base_link</span></code>, i.e.,
to publish a twist relative to the robot.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.rate">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.rate</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">10</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.rate" title="Permalink to this definition"></a></dt>
<dd><p>The rate in Hz at which <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a>, <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a>, and  <a class="reference internal" href="../robomaster_driver_node.html#RoboMasterROS.pub.joint_states_p" title="RoboMasterROS.pub.joint_states_p"><em class="xref ros ros-pub">joint_states_p</em></a>
(with wheel joints) are published.
One of <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">20,</span> <span class="pre">50</span></code> (else it will approximate to the nearest value).
A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> will effectively disable updates.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.status.rate">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.status.rate</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">1</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.status.rate" title="Permalink to this definition"></a></dt>
<dd><p>The rate in Hz at which <a class="reference internal" href="#RoboMasterROS.pub.state" title="RoboMasterROS.pub.state"><em class="xref ros ros-pub">state</em></a> is published.
One of <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">20,</span> <span class="pre">50</span></code> (else it will approximate to the nearest value).
A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> will effectively disable updates.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.imu_includes_orientation">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.imu_includes_orientation</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">true</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.imu_includes_orientation" title="Permalink to this definition"></a></dt>
<dd><p>When enabled, <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a> will include the orientation from <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a>.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.error.linear_velocity.xy">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.error.linear_velocity.xy</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">0.005</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.error.linear_velocity.xy" title="Permalink to this definition"></a></dt>
<dd><p>Horizontal linear velocity standard deviation in <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a> in m/s</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.error.angular_velocity.xy">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.error.angular_velocity.xy</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">0.01</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.error.angular_velocity.xy" title="Permalink to this definition"></a></dt>
<dd><p>Non-horizontal (i.e., roll and pitch components) angular velocity standard deviation
in <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a> and <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a> in rad/s.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.error.angular_velocity.z">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.error.angular_velocity.z</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">0.03</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.error.angular_velocity.z" title="Permalink to this definition"></a></dt>
<dd><p>Horizontal angular (i.e., yaw component) velocity standard deviation
in <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a> and <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a> in rad/s.</p>
</dd></dl>

<dl class="ros parameter">
<dt class="sig sig-object ros" id="RoboMasterROS.param.chassis.error.linear_acceleration.xyz">
<em class="property"><span class="pre">parameter</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">chassis.error.linear_acceleration.xyz</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="pre">[Default:</span> <code class="docutils literal notranslate"><span class="pre">0.1</span></code><span class="pre">]</span><span class="w"> </span><a class="reference external" href="#" title="Dynamic"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-sync sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.param.chassis.error.linear_acceleration.xyz" title="Permalink to this definition"></a></dt>
<dd><p>Linear acceleration standard deviation in <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a> in m/s^2.</p>
</dd></dl>

</section>
<section id="subscription">
<h2>Subscription<a class="headerlink" href="#subscription" title="Permalink to this heading"></a></h2>
<dl class="ros subscription">
<dt class="sig sig-object ros" id="RoboMasterROS.sub.cmd_vel">
<em class="property"><span class="pre">subscription</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">cmd_vel</span></span><span class="w"> </span><a class="reference external" href="http://docs.ros2.org/galactic/api/geometry_msgs/msg/Twist.html"><em class="xref ros ros-msg"><span class="pre">geometry_msgs/msg/Twist</span></em></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Reliability: reliable"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-check-circle sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM0 8a8 8 0 1116 0A8 8 0 010 8zm11.78-1.72a.75.75 0 00-1.06-1.06L6.75 9.19 5.28 7.72a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l4.5-4.5z"></path></svg></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Durability: volatile"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-pin sd-text-muted" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.456.734a1.75 1.75 0 012.826.504l.613 1.327a3.081 3.081 0 002.084 1.707l2.454.584c1.332.317 1.8 1.972.832 2.94L11.06 10l3.72 3.72a.75.75 0 11-1.061 1.06L10 11.06l-2.204 2.205c-.968.968-2.623.5-2.94-.832l-.584-2.454a3.081 3.081 0 00-1.707-2.084l-1.327-.613a1.75 1.75 0 01-.504-2.826L4.456.734zM5.92 1.866a.25.25 0 00-.404-.072L1.794 5.516a.25.25 0 00.072.404l1.328.613A4.582 4.582 0 015.73 9.63l.584 2.454a.25.25 0 00.42.12l5.47-5.47a.25.25 0 00-.12-.42L9.63 5.73a4.581 4.581 0 01-3.098-2.537L5.92 1.866z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.sub.cmd_vel" title="Permalink to this definition"></a></dt>
<dd><p>Receives a target twist in robot frame (<code class="docutils literal notranslate"><span class="pre">base_link</span></code>).
Only horizontal components (i.e., <code class="docutils literal notranslate"><span class="pre">linear.x</span></code>, <code class="docutils literal notranslate"><span class="pre">linear.y</span></code>, <code class="docutils literal notranslate"><span class="pre">angular.z</span></code>) are considered.
Values are clamped by the SDK before passing them to the robot.
If <a class="reference internal" href="#RoboMasterROS.param.chassis.twist_to_wheel_speeds" title="RoboMasterROS.param.chassis.twist_to_wheel_speeds"><em class="xref ros ros-param">chassis.twist_to_wheel_speeds</em></a> is enabled, the message is converted to target wheel speeds, which are then
treated as for <a class="reference internal" href="#RoboMasterROS.sub.cmd_wheels" title="RoboMasterROS.sub.cmd_wheels"><em class="xref ros ros-sub">cmd_wheels</em></a>.
If <a class="reference internal" href="#RoboMasterROS.param.chassis.timeout" title="RoboMasterROS.param.chassis.timeout"><em class="xref ros ros-param">chassis.timeout</em></a> is strictly positive, the robot will stop after <code class="docutils literal notranslate"><span class="pre">chassis.timeout</span></code>
seconds if no more messages are received.</p>
</dd></dl>

<dl class="ros subscription">
<dt class="sig sig-object ros" id="RoboMasterROS.sub.cmd_wheels">
<em class="property"><span class="pre">subscription</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">cmd_wheels</span></span><span class="w"> </span><a class="reference internal" href="../robomaster_msgs.html#robomaster_msgs.msg.WheelSpeeds" title="robomaster_msgs.msg.WheelSpeeds"><em class="xref ros ros-msg"><span class="pre">robomaster_msgs/msg/WheelSpeeds</span></em></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Reliability: reliable"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-check-circle sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM0 8a8 8 0 1116 0A8 8 0 010 8zm11.78-1.72a.75.75 0 00-1.06-1.06L6.75 9.19 5.28 7.72a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l4.5-4.5z"></path></svg></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Durability: volatile"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-pin sd-text-muted" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.456.734a1.75 1.75 0 012.826.504l.613 1.327a3.081 3.081 0 002.084 1.707l2.454.584c1.332.317 1.8 1.972.832 2.94L11.06 10l3.72 3.72a.75.75 0 11-1.061 1.06L10 11.06l-2.204 2.205c-.968.968-2.623.5-2.94-.832l-.584-2.454a3.081 3.081 0 00-1.707-2.084l-1.327-.613a1.75 1.75 0 01-.504-2.826L4.456.734zM5.92 1.866a.25.25 0 00-.404-.072L1.794 5.516a.25.25 0 00.072.404l1.328.613A4.582 4.582 0 015.73 9.63l.584 2.454a.25.25 0 00.42.12l5.47-5.47a.25.25 0 00-.12-.42L9.63 5.73a4.581 4.581 0 01-3.098-2.537L5.92 1.866z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.sub.cmd_wheels" title="Permalink to this definition"></a></dt>
<dd><p>Receives a list of target speeds, one for each wheel.
Values are clamped by the SDK before passing them to the robot.
If <a class="reference internal" href="#RoboMasterROS.param.chassis.timeout" title="RoboMasterROS.param.chassis.timeout"><em class="xref ros ros-param">chassis.timeout</em></a> is strictly positive, the robot will stopß after <code class="docutils literal notranslate"><span class="pre">chassis.timeout</span></code>
seconds if no more messages are received.</p>
</dd></dl>

</section>
<section id="publishers">
<h2>Publishers<a class="headerlink" href="#publishers" title="Permalink to this heading"></a></h2>
<dl class="ros publisher">
<dt class="sig sig-object ros" id="RoboMasterROS.pub.odom">
<em class="property"><span class="pre">publisher</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">odom</span></span><span class="w"> </span><a class="reference external" href="http://docs.ros2.org/galactic/api/nav_msgs/msg/Odometry.html"><em class="xref ros ros-msg"><span class="pre">nav_msgs/msg/Odometry</span></em></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Reliability: reliable"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-check-circle sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM0 8a8 8 0 1116 0A8 8 0 010 8zm11.78-1.72a.75.75 0 00-1.06-1.06L6.75 9.19 5.28 7.72a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l4.5-4.5z"></path></svg></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Durability: volatile"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-pin sd-text-muted" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.456.734a1.75 1.75 0 012.826.504l.613 1.327a3.081 3.081 0 002.084 1.707l2.454.584c1.332.317 1.8 1.972.832 2.94L11.06 10l3.72 3.72a.75.75 0 11-1.061 1.06L10 11.06l-2.204 2.205c-.968.968-2.623.5-2.94-.832l-.584-2.454a3.081 3.081 0 00-1.707-2.084l-1.327-.613a1.75 1.75 0 01-.504-2.826L4.456.734zM5.92 1.866a.25.25 0 00-.404-.072L1.794 5.516a.25.25 0 00.072.404l1.328.613A4.582 4.582 0 015.73 9.63l.584 2.454a.25.25 0 00.42.12l5.47-5.47a.25.25 0 00-.12-.42L9.63 5.73a4.581 4.581 0 01-3.098-2.537L5.92 1.866z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.pub.odom" title="Permalink to this definition"></a></dt>
<dd><p>Publishes the most recent state estimation. Publishing happens synchronously to <a class="reference internal" href="#RoboMasterROS.pub.imu" title="RoboMasterROS.pub.imu"><em class="xref ros ros-pub">imu</em></a>,
with which it shares orientation and angular velocity.
Depending on the value of <a class="reference internal" href="#RoboMasterROS.param.chassis.odom_twist_in_odom" title="RoboMasterROS.param.chassis.odom_twist_in_odom"><em class="xref ros ros-param">chassis.odom_twist_in_odom</em></a>, pose and twist
are in the same <code class="docutils literal notranslate"><span class="pre">odom</span></code> frame or the twist is in the <code class="docutils literal notranslate"><span class="pre">base_link</span></code> frame.
Update rate is controlled by parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.rate" title="RoboMasterROS.param.chassis.rate"><em class="xref ros ros-param">chassis.rate</em></a>.
The publishing rate may be lower due to poor communication with the robot.</p>
</dd></dl>

<dl class="ros publisher">
<dt class="sig sig-object ros" id="RoboMasterROS.pub.imu">
<em class="property"><span class="pre">publisher</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">imu</span></span><span class="w"> </span><a class="reference external" href="http://docs.ros2.org/galactic/api/sensor_msgs/msg/Imu.html"><em class="xref ros ros-msg"><span class="pre">sensor_msgs/msg/Imu</span></em></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Reliability: reliable"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-check-circle sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM0 8a8 8 0 1116 0A8 8 0 010 8zm11.78-1.72a.75.75 0 00-1.06-1.06L6.75 9.19 5.28 7.72a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l4.5-4.5z"></path></svg></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Durability: volatile"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-pin sd-text-muted" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.456.734a1.75 1.75 0 012.826.504l.613 1.327a3.081 3.081 0 002.084 1.707l2.454.584c1.332.317 1.8 1.972.832 2.94L11.06 10l3.72 3.72a.75.75 0 11-1.061 1.06L10 11.06l-2.204 2.205c-.968.968-2.623.5-2.94-.832l-.584-2.454a3.081 3.081 0 00-1.707-2.084l-1.327-.613a1.75 1.75 0 01-.504-2.826L4.456.734zM5.92 1.866a.25.25 0 00-.404-.072L1.794 5.516a.25.25 0 00.072.404l1.328.613A4.582 4.582 0 015.73 9.63l.584 2.454a.25.25 0 00.42.12l5.47-5.47a.25.25 0 00-.12-.42L9.63 5.73a4.581 4.581 0 01-3.098-2.537L5.92 1.866z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.pub.imu" title="Permalink to this definition"></a></dt>
<dd><p>Publishes the most recent state estimation. Publishing happens synchronously to <a class="reference internal" href="#RoboMasterROS.pub.odom" title="RoboMasterROS.pub.odom"><em class="xref ros ros-pub">odom</em></a>,
with which it shares orientation and angular velocity, with the addition of <code class="docutils literal notranslate"><span class="pre">linear_acceleration</span></code> measured by the accelerometer.
Angular velocity is the fused value, not the value read by the gyroscope, which is not exposed by SDK.
Update rate is controlled by parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.rate" title="RoboMasterROS.param.chassis.rate"><em class="xref ros ros-param">chassis.rate</em></a>.
The publishing rate may be lower due to poor communication with the robot.</p>
</dd></dl>

<dl class="ros publisher">
<dt class="sig sig-object ros" id="RoboMasterROS.pub.state">
<em class="property"><span class="pre">publisher</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">state</span></span><span class="w"> </span><a class="reference internal" href="../robomaster_msgs.html#robomaster_msgs.msg.ChassisStatus" title="robomaster_msgs.msg.ChassisStatus"><em class="xref ros ros-msg"><span class="pre">robomaster_msgs/msg/ChassisStatus</span></em></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Reliability: reliable"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-check-circle sd-text-primary" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM0 8a8 8 0 1116 0A8 8 0 010 8zm11.78-1.72a.75.75 0 00-1.06-1.06L6.75 9.19 5.28 7.72a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l4.5-4.5z"></path></svg></a><span class="w"> </span><a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html#qos-policies" title="Durability: volatile"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-pin sd-text-muted" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.456.734a1.75 1.75 0 012.826.504l.613 1.327a3.081 3.081 0 002.084 1.707l2.454.584c1.332.317 1.8 1.972.832 2.94L11.06 10l3.72 3.72a.75.75 0 11-1.061 1.06L10 11.06l-2.204 2.205c-.968.968-2.623.5-2.94-.832l-.584-2.454a3.081 3.081 0 00-1.707-2.084l-1.327-.613a1.75 1.75 0 01-.504-2.826L4.456.734zM5.92 1.866a.25.25 0 00-.404-.072L1.794 5.516a.25.25 0 00.072.404l1.328.613A4.582 4.582 0 015.73 9.63l.584 2.454a.25.25 0 00.42.12l5.47-5.47a.25.25 0 00-.12-.42L9.63 5.73a4.581 4.581 0 01-3.098-2.537L5.92 1.866z"></path></svg></a><a class="headerlink" href="#RoboMasterROS.pub.state" title="Permalink to this definition"></a></dt>
<dd><p>Publishes a compact state of the chassis.
Update rate is controlled by parameter <a class="reference internal" href="#RoboMasterROS.param.chassis.status.rate" title="RoboMasterROS.param.chassis.status.rate"><em class="xref ros ros-param">chassis.status.rate</em></a>.
Publishing rate may be lower due to poor communication with the robot.</p>
</dd></dl>

</section>
<section id="service-servers">
<h2>Service Servers<a class="headerlink" href="#service-servers" title="Permalink to this heading"></a></h2>
<dl class="ros service_server">
<dt class="sig sig-object ros" id="RoboMasterROS.srv_server.engage_wheels">
<em class="property"><span class="pre">service</span> <span class="pre">server</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">engage_wheels</span></span><span class="w"> </span><a class="reference external" href="http://docs.ros2.org/galactic/api/std_srvs/srv/SetBool.html"><em class="xref ros ros-srv"><span class="pre">std_srvs/srv/SetBool</span></em></a><a class="headerlink" href="#RoboMasterROS.srv_server.engage_wheels" title="Permalink to this definition"></a></dt>
<dd><p>Engage or disengage all motors at once.</p>
</dd></dl>

</section>
<section id="action-servers">
<h2>Action Servers<a class="headerlink" href="#action-servers" title="Permalink to this heading"></a></h2>
<dl class="ros action_server">
<dt class="sig sig-object ros" id="RoboMasterROS.act_server.move">
<em class="property"><span class="pre">action</span> <span class="pre">server</span></em><span class="w"> </span><span class="sig-name descname"><span class="pre">move</span></span><span class="w"> </span><a class="reference internal" href="../robomaster_msgs.html#robomaster_msgs.action.Move" title="robomaster_msgs.action.Move"><em class="xref ros ros-action"><span class="pre">robomaster_msgs/action/Move</span></em></a><a class="headerlink" href="#RoboMasterROS.act_server.move" title="Permalink to this definition"></a></dt>
<dd><p>Move the robot towards a target pose relative to the robot frame (<code class="docutils literal notranslate"><span class="pre">base_link</span></code>) at given
angular and linear speed using an onboard controller.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>New goals are not accepted if a current goal is active. To change goal, you first need
to <a class="reference external" href="https://docs.ros2.org/latest/api/rclpy/api/actions.html#rclpy.action.client.ClientGoalHandle.cancel_goal_async">cancel</a>
the current goal.</p>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="camera.html" class="btn btn-neutral float-left" title="Camera" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gimbal.html" class="btn btn-neutral float-right" title="Gimbal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Jérôme Guzzi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>